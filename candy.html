<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="StyleSheet" href="candy.css" type="text/css">
    <link rel="StyleSheet" href="home-page.css" type="text/css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <title>Document</title>
</head>

<body>
    <div id="pagina">


        <div class="encabezado">
            <a href="home-page.html"> <img src="./imagenes/logo.png" width="100" height="100"> </a> 

            <div class="botones" style="justify-content: center;">
                <a href="home-page.html"> Home </a>
                <a href="cartelera.html"> Cartelera </a>
                <a href="candy.html"> Candy </a>
                <a href="promociones.html"> Promociones </a>
                <a href="xperiencescense.html"> XperienceScense </a>

            </div>
        </div>


        <div class="contenedor-titulo-candy" id="bebidas">
            <h1>BEBIDAS</h1>
        </div>


        <div class="seccion-bebidas ocultar">
            <a class="secciontipo">
                <img class="galeria" src="imagenes/bebida1.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Coca Cola</p>
                    <p class="precio"> $3500 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/bebida2.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Fanta</p>
                    <p class="precio"> $3500 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/bebida3.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Jugo Citric Naranja</p>
                    <p class="precio"> $2500 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/bebida4.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Agua Sin Gas Villavicencia</p>
                    <p class="precio"> $3000 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>
        </div>


        <div class="contenedor-titulo-candy" id="comida">
            <h1>COMIDA</h1>
        </div>


        <div class="seccion-comidas ocultar">
            <a class="secciontipo">
                <img class="galeria" src="imagenes/comida1.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Pochoclos</p>
                    <p class="precio"> $5000 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/comida 2.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Nachos Macritas</p>
                    <p class="precio"> $5500 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/comida3.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Pancho</p>
                    <p class="precio"> $4000 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/comida4.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Papas Fritas con Aderezo</p>
                    <p class="precio"> $5500 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>
        </div>



        <div class="contenedor-titulo-candy" id="combos">
            <h1>COMBOS</h1>
        </div>


        <div class="seccion-combos ocultar">
            <a class="secciontipo">
                <img class="galeria" src="imagenes/combo1.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Dos Gaseosas + Dos Valdes de Pochoclos chicos</p>
                    <p class="precio"> $13500 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/combo2.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Gaseosa + Nachos</p>
                    <p class="precio"> $8000 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/combo3.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Pancho + Papas Fritas + Jugo</p>
                    <p class="precio"> $9800 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>

            <a class="secciontipo">
                <img class="galeria" src="imagenes/combo4.png">
                <div class="contenedor-precio">
                    <p class="nombre-producto">Gasseosa + Pancho + Alfajor</p>
                    <p class="precio"> $7000 </p>
                </div>
                <button class="agregar-carrito">Agregar al Carrito</button>
            </a>
        </div>

        <div id="carrito">
            <h2>Carrito de Compras</h2>
            <ul id="lista-carrito"></ul>
            <p id="total-carrito"></p>
        </div>


        <div id="footer">
            <div class="informacion">
                <p> Todos los derechos reservados. Cine Scense 2024.
                    Prohibida la reproducción total o parcial sin autorización previa.
                </p>
            </div>
            <div class="informacion">
                <p> Taquilla: Lunes a Domingos de 10:00 a 22:00 hs. </p>
            </div>
            <div class="informacion">
                <p> Atención al Cliente: Lunes a Viernes de 09:00 a 18:00 hs.
                </p>
            </div>
            <div class="informacion">
                <p> Número de contacto: 0800-8376-9288
                </p>
            </div>
            <div class="informacion">
                <p>Este sitio web utiliza cookies para mejorar
                    su experiencia de usuario. Al continuar navegando, acepta nuestra política
                    de cookies
                </p>
            </div>
            <div class="informacion">
                <p> X: @ScenseCine </p>
            </div>
            <div class="informacion">
                <p> Facebook: @cine_Scense </p>
            </div>
            <div class="informacion">
                <p> Instagram: @cine_Scense </p>
            </div>
        </div>

    </div>

    <script language="javascript">
        var carrito = []; //creo un carrito vacío para almacenar los productos 
        var botonCarrito = document.getElementsByClassName('agregar-carrito'); //botones que permiten agregar productos al carrito
        var margenCandy = 90;

        for (var i = 0; i < botonCarrito.length; i++) //inicio un bucle for para iterar sobre cada botón con la clase agregar-carrito
        {
            botonCarrito[i].addEventListener('click', function(event) //agrego un evento click a cada botón, para agregar el producto al carrito
            {
                var boton = event.target; //almaceno el botón que se clicó en la variable boton
                var nombre = this.parentNode.querySelector ('.nombre-producto').textContent; //busco el elemento con la clase nombre-producto dentro del mismo contenedor del botón y obtengo su contenido de texto (nombre del producto)
                var precio = parseFloat(this.parentNode.querySelector ('.precio').textContent.replace('$', '')); //obtengo el precio del producto y lo convierto en número flotante. Elimino el símbolo de dólar
                console.log(precio); 

                agregarAlCarrito(nombre, precio); //llamo a la función agregarAlCarrito con el nombre y el precio del producto
            }
        )
        }
        
        function agregarAlCarrito (nombre, precio)
        {
            carrito.push({nombre: nombre, precio: precio}); //añado un objeto con las propiedades nombre y precio al carrito
            console.log(carrito)
            
            const contenedorBebidas = document.getElementById('bebidas');
            margenCandy = margenCandy + 90;
            contenedorBebidas.style.marginTop = margenCandy + 'px'

            actualizarCarrito(); //llamo a la función actualizarCarrito para mostrar los cambios en el carrito
        }

        function actualizarCarrito ()
        {
            var listaCarrito = document.getElementById('lista-carrito'); //selecciono el elemento con el ID lista-carrito (donde se mostrará la lista de productos)
            var totalCarrito = document.getElementById('total-carrito'); //selecciono el elemento con el ID total-carrito (donde se mostrará el total a pagar)

            var total= 0; //para acumular el precio de todos los productos en el carrito

            listaCarrito.innerHTML = ''; //vaciamos el contenido HTML de listaCarrito para evitar duplicar productos en pantalla

            for (var i = 0; i < carrito.length; i++ ) //para recorrer cada producto en el carrito
          {
            var elemento = document.createElement('li'); //creo un nuevo elemento de lista ('li') y le asigno el nombre y precio del producto actual
            elemento.textContent = carrito[i].nombre + ': ' + carrito[i].precio;
            listaCarrito.appendChild(elemento); //agrego el elemento de lista al contenedor listaCarrito
            total += carrito[i].precio; //sumo el precio del producto actual al total
          }

          totalCarrito.textContent = 'Total a pagar: ' + total.toFixed(2); //actualizo el texto del totalCarrito para mostrar el total, redondeado a dos decimales
        }

        document.getElementById('carrito').addEventListener('click', function() //agrego un evento click al elemento con ID carrito para mostrar el contenido del carrito en una alerta cuando se hace click en él
        {
            var mensaje = 'Tu carrito 🡪 ';
            for (var i = 0; i < carrito.length; i++) //recorro el carrito para agregar cada producto al mensaje
            {
                mensaje += carrito[i].nombre + ': ' + carrito[i].precio + ', ' ; //añado el nombre y precio de cada producto al mensaje 
            }
            mensaje += document.getElementById('total-carrito').textContent; //añado el total al mensaje
            alert(mensaje); //muestro el contenido del carrito con un alert
        }
        )

        $(document).ready(function() //creo función para que al apretar el título de Bebida, Comida o Combo aparezcan las opciones.
                                     //y si volvemos a hacer clic se ocultan
        {
            $("#bebidas").click(function() {
                var seccion = $(".seccion-bebidas");
                if (seccion.hasClass("ocultar")) { //si tiene la caracteristica de ocultar borro la misma y hago un slideDown. Esto es para que la primera vez que hago clic no se abra y cierre solo.
                    seccion.removeClass("ocultar").slideDown();
                } 
                else {
                    seccion.slideToggle(); 
                }
            });
            
            $("#comida").click(function() {
                var seccion = $(".seccion-comidas");
                if (seccion.hasClass("ocultar")) {
                    seccion.removeClass("ocultar").slideDown();
                } 
                else {
                    seccion.slideToggle();
                }
            });
            
            $("#combos").click(function() {
                var seccion = $(".seccion-combos");
                if (seccion.hasClass("ocultar")) {
                    seccion.removeClass("ocultar").slideDown();
                }
                else {
                    seccion.slideToggle();
                }
            });
        });

    </script>

</body>